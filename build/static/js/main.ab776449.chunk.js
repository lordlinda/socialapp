(this.webpackJsonpsocialapp=this.webpackJsonpsocialapp||[]).push([[0],{163:function(e,a,t){e.exports=t(213)},168:function(e,a,t){},213:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(11),c=t.n(l),o=(t(168),t(12)),i=t(17),m=t(142),s=t(253),u=t(126),d=t(10),p=t(15),E=t.n(p),f=function(){return function(e){e({type:"LOADING_USER"}),E.a.get("/user").then((function(a){e({type:"SET_USER",payload:a.data})})).catch((function(e){console.log(e)}))}},b=function(e){localStorage.setItem("token",e),E.a.defaults.headers.common.Authorization=e},g=function(){return function(e){localStorage.removeItem("token"),delete E.a.defaults.headers.common.Authorization,e({type:"SET_AUTHENTICATED"})}},h=t(46),v=t(128),y=t(129),O=t(64),j=t(4),S={authenticated:!1,credentials:{},likes:[],notifications:[]},x={screams:[],scream:{},loading:!1},I={loading:!1,errors:null},N=[y.a],C=Object(h.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_AUTHENTICATED":return Object(j.a)(Object(j.a)({},e),{},{authenticated:!0});case"SET_UNAUTHENTICATED":return{initialState:S};case"SET_USER":return Object(j.a)(Object(j.a)({},e),{},{authenticated:!0},a.payload);case"LIKE_SCREAM":return Object(j.a)(Object(j.a)({},e),{},{likes:[].concat(Object(O.a)(e.likes),[{userHandle:e.credentials.handle,screamId:a.payload.screamId}])});case"UNLIKE_SCREAM":return Object(j.a)(Object(j.a)({},e),{},{likes:e.likes.filter((function(e){return e.screamId!==a.payload.screamId}))});default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOADING_DATA":return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case"SET_SCREAMS":return Object(j.a)(Object(j.a)({},e),{},{screams:a.payload,loading:!1});case"SET_SCREAM":return Object(j.a)(Object(j.a)({},e),{},{scream:a.payload,loading:!1});case"LIKE_SCREAM":case"UNLIKE_SCREAM":var t=e.screams.findIndex((function(e){return e.screamId===a.payload.screamId}));return e.screams[t]=a.payload,e.scream.screamId===a.payload.screamId&&(e.scream=a.payload),Object(j.a)({},e);case"DELETE_SCREAM":var n=e.screams.findIndex((function(e){return e.screamId===a.payload}));return e.screams.splice(n,1),Object(j.a)({},e);case"POST_SCREAM":return Object(j.a)(Object(j.a)({},e),{},{screams:[a.payload].concat(Object(O.a)(e.screams))});case"SUBMIT_COMMENT":return Object(j.a)(Object(j.a)({},e),{},{scream:Object(j.a)(Object(j.a)({},e.scream),{},{comments:[a.payload].concat(Object(O.a)(e.scream.comments))})});default:return e}},UI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_ERRORS":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,errors:a.payload});case"CLEAR_ERRORS":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,errors:a.null});case"LOADING_UI":return Object(j.a)(Object(j.a)({},e),{},{loading:!0});default:return e}}}),w=Object(h.createStore)(C,{},Object(v.composeWithDevTools)(h.applyMiddleware.apply(void 0,N))),A=t(255),k=t(256),R=t(251),T=t(266),U=t(245),D=t(136),_=t.n(D),L=t(99),M=t.n(L),F=t(130),B=t(28),W=t(18),P=t(22),Y=t.n(P),z=t(263),H=t(265),G=t(249),K=t(248),J=t(252),V=t(134),q=t.n(V),$=t(81),Q=t.n($),X=function(){return function(e){e({type:"CLEAR_ERRORS"})}};var Z=Object(d.b)((function(e){return{UI:e.UI}}),{postScream:function(e){return function(a){a({type:"LOADING_UI"}),E.a.post("/scream",e).then((function(e){a({type:"POST_SCREAM",payload:e.data}),a(X())})).catch((function(e){a({type:"SET_ERRORS",payload:e.response.data})}))}},clearErrors:X})(Y()({submitButton:{position:"relative",float:"right",marginTop:10},progressSpinner:{position:"absolute"},closeButton:{float:"right"}})((function(e){var a=Object(n.useState)({open:!1,body:"",errors:{}}),t=Object(W.a)(a,2),l=t[0],c=t[1],o=l.open,i=l.body,m=l.errors,s=function(){e.clearErrors(),c(Object(j.a)(Object(j.a)({},l),{},{open:!1,errors:{}}))},u=function(){var a=Object(F.a)(M.a.mark((function a(t){return M.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.next=3,e.postScream({body:i});case 3:e.UI.errors||e.UI.loading||c(Object(j.a)(Object(j.a)({},l),{},{open:!1,body:"",errors:{}}));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();Object(n.useEffect)((function(){c(Object(j.a)(Object(j.a)({},l),{},{errors:e.UI.errors}))}),[e.UI.errors]);var d=e.classes,p=e.UI.loading;return r.a.createElement("div",null,r.a.createElement(n.Fragment,null,r.a.createElement(U.a,{onClick:function(){c(Object(j.a)(Object(j.a)({},l),{},{open:!0}))}},r.a.createElement(q.a,null)),r.a.createElement(H.a,{open:o,onClose:s,fullWidth:!0,maxWidth:"sm"},r.a.createElement(U.a,{onClick:s,className:d.closeButton},r.a.createElement(Q.a,null)),r.a.createElement(K.a,null,"Post a new scream"),r.a.createElement(G.a,null,r.a.createElement("form",{onSubmit:u},r.a.createElement(z.a,{name:"body",type:"text",placeholder:"post",error:!!(null===m||void 0===m?void 0:m.error),helperText:null===m||void 0===m?void 0:m.error,className:d.textField,value:i,onChange:function(e){c(Object(j.a)(Object(j.a)({},l),{},Object(B.a)({},e.target.name,e.target.value)))},fullWidth:!0}),r.a.createElement(R.a,{type:"submit",variant:"contained",color:"primary",className:d.submitButton,disabled:p},"Submit",p&&r.a.createElement(J.a,{size:30,className:d.progressSpinner})))))))}))),ee=t(25),ae=t.n(ee),te=t(85),ne=t.n(te),re=t(143),le=t(267),ce=t(146),oe=t(254),ie=t(91),me=t.n(ie),se=t(86),ue=t.n(se),de=t(54),pe=t.n(de);var Ee=Object(d.b)((function(e){return{notifications:e.user.notifications}}),{markNotificationsRead:function(e){return function(a){E.a.post("/notifications",e).then((function(e){a({type:"MARK_NOTIFICATIONS_READ"})})).catch((function(e){return console.log(e)}))}}})((function(e){var a=Object(n.useState)(null),t=Object(W.a)(a,2),l=t[0],c=t[1],i=function(){c(null)},m=e.notifications;return ae.a.extend(ne.a),r.a.createElement("div",null,r.a.createElement(n.Fragment,null,r.a.createElement(T.a,{placement:"top",title:"Notifications"},r.a.createElement(U.a,{"aria-owns":l?"simple-menu":void 0,"aria-haspopup":"true",onClick:function(e){c(e.target)}},m&&m.length>0&&m.filter((function(e){return"false"===e.read})).length>0?r.a.createElement(oe.a,{badgeContent:m.filter((function(e){return"false"===e.read})).length,color:"secondary"},r.a.createElement(me.a,null)):r.a.createElement(me.a,null))),r.a.createElement(re.a,{anchorEl:l,open:Boolean(l),onClose:i,onEntered:function(){var a=e.notifications.filter((function(e){return"false"===e.read})).map((function(e){return e.notificationId}));e.markNotificationsRead(a)}},m&&m.length>0?m.map((function(e){var a="like"===e.type?"liked":"commented on",t=ae()(e.createdAt).fromNow(),n=e.read?"primary":"secondary",l="like"===e.type?r.a.createElement(ue.a,{color:n,style:{marginRight:10}}):r.a.createElement(pe.a,{color:n,style:{marginRight:10}});return r.a.createElement(le.a,{key:e.createdAt,onClick:i},l,r.a.createElement(ce.a,{component:o.b,color:"default",variant:"body1",to:"/users/".concat(e.recipient,"/scream/").concat(e.screamId)},e.sender," ",a," your scream ",t))})):r.a.createElement(le.a,{onClick:i},"You have no notifications yet"))))}));var fe=Object(d.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var a=e.authenticated;return r.a.createElement("div",null,r.a.createElement(A.a,null,r.a.createElement(k.a,{className:"nav__container"},a?r.a.createElement("div",{className:"nav__links"},r.a.createElement(Z,null),r.a.createElement(T.a,{title:"Home"},r.a.createElement(U.a,null,r.a.createElement(o.b,{to:"/"},r.a.createElement(_.a,null)))),r.a.createElement(Ee,null)):r.a.createElement("div",null,r.a.createElement(R.a,{color:"inherit",component:o.b,to:"/login"},"Login"),r.a.createElement(R.a,{color:"inherit",component:o.b,to:"/signup"},"Signup"),r.a.createElement(R.a,{color:"inherit",component:o.b,to:"/"},"Home")))))})),be=t(257),ge=t(5),he=t(259),ve=t(260),ye=t(268);var Oe=Y()({commentImage:{maxWidth:"100%",height:100,objectFit:"cover",borderRadius:"50%"},commentData:{marginLeft:20}})((function(e){var a=e.comments,t=e.classes;return r.a.createElement("div",null,r.a.createElement(be.a,{container:!0},a?a.map((function(e,l){var c=e.body,i=e.createdAt,m=e.imageUrl,s=e.userHandle;return r.a.createElement(n.Fragment,{key:i},r.a.createElement(be.a,{item:!0,sm:12},r.a.createElement(be.a,{container:!0},r.a.createElement(be.a,{item:!0,sm:2},r.a.createElement(ye.a,{alt:"Remy Sharp",src:m})),r.a.createElement(be.a,{item:!0,sm:9},r.a.createElement("div",{className:t.commentData},r.a.createElement(ce.a,{variant:"h5",component:o.b,to:"/users/".concat(s),color:"primary"},s),r.a.createElement(ce.a,{variant:"body2",color:"textSecondary"},ae()(i).format("h:mm a, MMMM DD YYYY")),r.a.createElement("hr",{className:t.invisibleSeparator}),r.a.createElement(ce.a,{variant:"body1"},c))))),l!==a.length-1&&r.a.createElement("hr",{className:t.visibleSeparator}))})):null))}));var je=Object(d.b)((function(e){return{UI:e.UI,authenticated:e.user.authenticated}}),{submitComment:function(e,a){return function(t){E.a.post("/scream/".concat(e,"/comment"),a).then((function(e){t({type:"SUBMIT_COMMENT",payload:e.data}),t(X())})).catch((function(e){t({type:"SET_ERRORS",payload:e.response.data})}))}}})(Y()({form:{display:"flex",alignItems:"center",justifyContent:"center"},textField:{margin:"10px auto"},button:{marginLeft:"10px",textTransform:"inherit",borderRadius:"15px"}})((function(e){var a=Object(n.useState)({body:"",errors:null}),t=Object(W.a)(a,2),l=t[0],c=t[1],o=l.body,i=l.errors,m=e.classes,s=e.authenticated;return Object(n.useEffect)((function(){c(Object(j.a)(Object(j.a)({},l),{},{errors:e.UI.errors}))}),[e.UI.errors]),r.a.createElement("div",null,s?r.a.createElement(be.a,{item:!0,sm:12,style:{textAlign:"center",marginLeft:"20px"}},r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.submitComment(e.screamId,{body:o}),c(Object(j.a)(Object(j.a)({},l),{},{body:""}))},className:m.form},r.a.createElement(z.a,{name:"body",type:"text",label:"Comment",error:!!(null===i||void 0===i?void 0:i.comment),helperText:null===i||void 0===i?void 0:i.comment,value:o,onChange:function(e){c(Object(j.a)(Object(j.a)({},l),{},Object(B.a)({},e.target.name,e.target.value)))},fullWidth:!0,className:m.textField}),r.a.createElement(R.a,{type:"submit",size:"small",variant:"contained",color:"primary",className:m.button},"Submit"))):null)}))),Se=t(137),xe=t.n(Se);var Ie=Object(d.b)((function(e){return{scream:e.data.scream,UI:e.UI}}),{getScream:function(e){return function(a){a({type:"LOADING_DATA"}),E.a.get("/scream/".concat(e)).then((function(e){a({type:"SET_SCREAM",payload:e.data})})).catch((function(e){return console.log(e)}))}},clearErrors:X})(Y()({profileImage:{borderRadius:"50%",objectFit:"cover"},dialogContent:{padding:20},closeButton:{position:"absolute",left:"80%"},expandButton:{},spinnerDiv:{textAlign:"center",marginTop:50,marginBottom:50},flexBox:{display:"flex",alignItems:"center",justifyContent:"start"}})((function(e){var a=Object(n.useState)({open:!1,oldPath:"",newPath:""}),t=Object(W.a)(a,2),l=t[0],c=t[1],i=l.open,m=l.oldPath,s=l.newPath;Object(n.useEffect)((function(){e.openDialog&&u()}),[]);var u=function(){var a=e.userHandle,t=e.screamId;c(Object(j.a)(Object(j.a)({},l),{},{oldPath:window.location.pathname,newPath:"/users/".concat(a,"/scream/").concat(t)})),m===s&&c(Object(j.a)(Object(j.a)({},l),{},{oldPath:"users/".concat(a)})),window.history.pushState(null,null,s),c(Object(j.a)(Object(j.a)({},l),{},{open:!0,oldPath:m,newPath:s})),e.getScream(e.openDialog?e.openDialog:e.screamId)},d=function(){window.history.pushState(null,null,m),c(Object(j.a)(Object(j.a)({},l),{},{open:!1})),e.clearErrors()},p=e.classes,E=e.scream,f=E.body,b=E.createdAt,g=E.likeCount,h=E.commentCount,v=E.imageUrl,y=E.userHandle,O=E.comments,S=e.UI.loading;return r.a.createElement("div",{className:p.container},r.a.createElement(n.Fragment,null,r.a.createElement(T.a,{title:"Expand scream"},r.a.createElement(U.a,{onClick:u,className:p.expandButton},r.a.createElement(xe.a,{color:"primary"}))),r.a.createElement(H.a,{open:i,onClose:d,fullWidth:!0,maxWidth:"sm"},r.a.createElement(T.a,{title:"Close"},r.a.createElement(U.a,{onClick:d,className:p.closeButton},r.a.createElement(Q.a,null))),r.a.createElement(G.a,{className:p.dialogContent},S?r.a.createElement("div",{className:p.spinnerDiv},r.a.createElement(J.a,{size:200,thickness:2})):r.a.createElement(be.a,{container:!0},r.a.createElement(be.a,{item:!0,sm:1},r.a.createElement(ye.a,{alt:"Remy Sharp",src:v,className:p.profileImage})),r.a.createElement(be.a,{item:!0,sm:8},r.a.createElement(ce.a,{component:o.b,color:"primary",variant:"h6",to:"/users/".concat(y)},"@",y),r.a.createElement(ce.a,{variant:"body2",color:"textSecondary"},ae()(b).format("h:mm a, MMMM DD YYYY")),r.a.createElement("br",null),r.a.createElement(ce.a,{variant:"body1"},f),r.a.createElement("span",null,g," likes"),r.a.createElement(T.a,{title:"comments"},r.a.createElement(U.a,null,r.a.createElement(pe.a,{color:"primary"}))),r.a.createElement("span",null,h," comments"),r.a.createElement(je,{screamId:e.screamId})),r.a.createElement(Oe,{comments:O}))))))}))),Ne=t(258),Ce=t(138),we=t.n(Ce);var Ae=Object(d.b)(null,{deleteScream:function(e){return function(a){E.a.delete("/scream/".concat(e)).then((function(){a({type:"DELETE_SCREAM",payload:e})})).catch((function(e){return console.log(e)}))}}})(Y()({deleteButton:{}})((function(e){var a=Object(n.useState)(!1),t=Object(W.a)(a,2),l=t[0],c=t[1],o=function(){c(!1)},i=e.classes;return r.a.createElement("div",null,r.a.createElement(n.Fragment,null,r.a.createElement(T.a,{title:"Delete scream"},r.a.createElement(U.a,{tip:"Delete Scream",onClick:function(){c(!0)},className:i.deleteButton},r.a.createElement(we.a,{color:"secondary",fontSize:"small"}))),r.a.createElement(H.a,{open:l,onClose:o,fullWidth:!0,maxWidth:"sm"},r.a.createElement(K.a,null,"Are you sure you want to delete this scream ?"),r.a.createElement(Ne.a,null,r.a.createElement(R.a,{onClick:o,color:"primary"},"Cancel"),r.a.createElement(R.a,{onClick:function(){e.deleteScream(e.screamId),c(!1)},color:"secondary"},"Delete")))))}))),ke=t(102),Re=t.n(ke);var Te={likeScream:function(e){return function(a){E.a.get("/scream/".concat(e,"/like")).then((function(e){a({type:"LIKE_SCREAM",payload:e.data}),console.log(e.data)})).catch((function(e){return console.log(e)}))}},unlikeScream:function(e){return function(a){E.a.get("/scream/".concat(e,"/unlike")).then((function(e){a({type:"UNLIKE_SCREAM",payload:e.data}),console.log(e.data)})).catch((function(e){return console.log(e)}))}}},Ue=Object(d.b)((function(e){return{user:e.user}}),Te)((function(e){var a=e.user.authenticated;return r.a.createElement("div",null,a?e.user.likes&&e.user.likes.find((function(a){return a.screamId===e.screamId}))?r.a.createElement(T.a,{title:"undo like"},r.a.createElement(U.a,{onClick:function(){e.unlikeScream(e.screamId)}},r.a.createElement(ue.a,{color:"primary",fontSize:"small"}))):r.a.createElement(T.a,{title:"like"},r.a.createElement(U.a,{tip:"Like",onClick:function(){e.likeScream(e.screamId)}},r.a.createElement(Re.a,{color:"primary",fontSize:"small"}))):r.a.createElement(o.b,{to:"/login"},r.a.createElement(T.a,{title:"Like"},r.a.createElement(U.a,null,r.a.createElement(Re.a,{color:"primary",fontSize:"small"})))))}));var De=Object(d.b)((function(e){return{user:e.user}}))(Object(ge.a)({card:{display:"flex",marginBottom:"20px"},link:{textDecoration:"none"},content:{objectFit:"cover"},image:{margin:20},flexBox:{display:"flex",alignItems:"center",justifyContent:"start"}})((function(e){var a=e.classes,t=e.scream,n=t.body,l=t.createdAt,c=t.imageUrl,i=t.screamId,m=t.commentCount,s=t.userHandle,u=e.user,d=u.authenticated,p=u.credentials.handle;return ae.a.extend(ne.a),r.a.createElement("div",null,r.a.createElement(he.a,{className:a.card},r.a.createElement(ye.a,{alt:"Remy Sharp",src:c,className:a.image}),r.a.createElement(ve.a,null,r.a.createElement(ce.a,{variant:"h6",component:o.b,to:"/users/".concat(s),className:a.link,color:"primary"},s),r.a.createElement(ce.a,{variant:"body1"},n),r.a.createElement(ce.a,{variant:"body2",color:"textSecondary"},ae()(l).fromNow()),r.a.createElement("div",{className:a.flexBox},r.a.createElement("div",null,r.a.createElement(Ue,{screamId:i})),r.a.createElement("div",null,r.a.createElement(T.a,{title:"comments"},r.a.createElement(U.a,{tip:"comments"},r.a.createElement(pe.a,{color:"primary",fontSize:"small"})))),r.a.createElement("div",null,r.a.createElement(Ie,{screamId:i,userHandle:s,openDialog:e.openDialog})),d&&s===p?r.a.createElement(Ae,{screamId:i}):null),r.a.createElement("span",null,m," comments"))))}))),_e=t(145),Le=t(139),Me=t.n(Le),Fe=t(87),Be=t.n(Fe),We=t(90),Pe=t.n(We),Ye=t(140),ze=t.n(Ye),He=t(89),Ge=t.n(He);var Ke=Object(d.b)((function(e){return{user:e.user}}),{editUserDetails:function(e){return function(a){a({type:"LOADING_USER"}),E.a.post("/user",e).then((function(){a(f())})).catch((function(e){return console.log(e)}))}}})(Object(ge.a)({textField:{margin:"10px auto"},button:{float:"right"}})((function(e){var a=Object(n.useState)({bio:"",website:"",location:"",open:!1}),t=Object(W.a)(a,2),l=t[0],c=t[1],o=l.bio,i=l.website,m=l.location,s=l.open,u=e.classes,d=e.user;Object(n.useEffect)((function(){c(Object(j.a)(Object(j.a)({},l),{},{bio:d.bio?d.bio:"",website:d.website?d.website:"",location:d.location?d.location:""}))}),[]);var p=function(){c(Object(j.a)(Object(j.a)({},l),{},{open:!s}))},E=function(e){c(Object(j.a)(Object(j.a)({},l),{},Object(B.a)({},e.target.name,e.target.value)))};return r.a.createElement(n.Fragment,null,r.a.createElement(T.a,{title:"Edit Details",placement:"top"},r.a.createElement(U.a,{onClick:p,className:u.button},r.a.createElement(Be.a,{color:"primary"}))),r.a.createElement(H.a,{onClose:p,open:s,fullWidth:!0,maxWidth:"sm"},r.a.createElement(K.a,null,"Edit details"),r.a.createElement(G.a,null,r.a.createElement("form",null,r.a.createElement(z.a,{name:"bio",tpye:"text",label:"Bio",multiline:!0,rows:"3",placeholder:"A short bio about yourself",className:u.textField,value:o,onChange:E,fullWidth:!0}),r.a.createElement(z.a,{name:"website",tpye:"text",label:"Website",placeholder:"Your personal/professinal website",className:u.textField,value:i,onChange:E,fullWidth:!0}),r.a.createElement(z.a,{name:"location",tpye:"text",label:"Location",placeholder:"Where you live",className:u.textField,value:m,onChange:E,fullWidth:!0}))),r.a.createElement(Ne.a,null,r.a.createElement(R.a,{onClick:p,color:"primary"},"Cancel"),r.a.createElement(R.a,{onClick:function(){var a={bio:o,website:i,location:m};e.editUserDetails(a),p()},color:"primary"},"Save"))))}))),Je=t(88),Ve=t.n(Je),qe=Y()({handle:{height:20,width:60,margin:"0 auto 7px auto"},fullLine:{height:15,backgroundColor:"rgba(0,0,0,0.6)",width:"100%",marginBottom:10},halfLine:{height:15,backgroundColor:"rgba(0,0,0,0.6)",width:"50%",marginBottom:10},paper:{padding:20},profile:{"& .image-wrapper":{textAlign:"center",position:"relative","& button":{position:"absolute",top:"80%",left:"70%"}}},profileImage:{width:200,height:200,objectFit:"cover",maxWidth:"100%",borderRadius:"50%"},"& .profile-details":{textAlign:"center","& span, svg":{verticalAlign:"middle"},"& a":{color:"#00bcd4"}},"& hr":{border:"none",margin:"0 0 10px 0"},"& svg.button":{"&:hover":{cursor:"pointer"}}})((function(e){var a=e.classes;return r.a.createElement(_e.a,{className:a.paper},r.a.createElement("div",{className:a.profile},r.a.createElement("div",{className:"image-wrapper"},r.a.createElement("img",{src:Ve.a,alt:"profile",className:a.profileImage})),r.a.createElement("hr",null),r.a.createElement("div",{className:"profile-details"},r.a.createElement("div",{className:a.handle}),r.a.createElement("hr",null),r.a.createElement("div",{className:a.fullLine}),r.a.createElement("div",{className:a.fullLine}))))})),$e=Object(d.b)((function(e){return{user:e.user}}),{uploadImage:function(e){return function(a){a({type:"LOADING_USER"}),E.a.post("https://us-central1-socialapp-e0d9f.cloudfunctions.net/api/imageUpload",e).then((function(){a(f())})).catch((function(e){return console.log(e)}))}},logOut:g})(Object(ge.a)({paper:{padding:20},profileImage:{width:150,height:150,objectFit:"cover",borderRadius:"50%"},profileDetails:{textAlign:"center","& span, svg":{verticalAlign:"middle"},"& a":{color:"#00bcd4"}},flexBox:{display:"flex",alignItems:"center",justifyContent:"center"}})((function(e){var a=e.classes,t=e.user,n=t.credentials,l=n.handle,c=n.createdAt,i=n.imageUrl,m=n.bio,s=n.website,u=n.location,d=t.loading,p=t.authenticated;return r.a.createElement("div",null,d?r.a.createElement(qe,null):p?r.a.createElement(_e.a,{className:a.paper},r.a.createElement(ye.a,{alt:"Remy Sharp",src:i,className:a.profileImage}),r.a.createElement(T.a,{title:"Edit profile picture",placement:"top"},r.a.createElement(U.a,{onClick:function(){document.querySelector("#imageInput").click()}},r.a.createElement("input",{type:"file",id:"imageInput",hidden:"hidden",onChange:function(a){var t=a.target.files[0],n=new FormData;n.append("image",t,t.name),e.uploadImage(n)}}),r.a.createElement(Be.a,{color:"primary",fontSize:"small"}))),r.a.createElement("div",{className:a.profileDetails},r.a.createElement(ce.a,{component:"span",variant:"h6",className:a.inline,color:"primary"},"@".concat(l)),r.a.createElement("div",null,r.a.createElement(ce.a,{component:"span",variant:"body2",className:a.inline,color:"textPrimary"},m&&r.a.createElement(ce.a,{variant:"body2"},m))),c&&r.a.createElement("div",null,r.a.createElement(Me.a,{color:"primary",fontSize:"small"})," ",r.a.createElement("span",null,"Joined ",ae()(c).format("MMM YYYY"))),r.a.createElement("br",null),u&&r.a.createElement("div",{className:a.flexBox},r.a.createElement(Ge.a,{color:"primary",fontSize:"small"})," ",r.a.createElement("span",null,u)),s&&r.a.createElement("div",{className:a.flexBox},r.a.createElement(Pe.a,{color:"primary"}),r.a.createElement("a",{href:s,target:"_blank",rel:"noopener noreferrer"},s))),r.a.createElement("div",{className:a.flexBox},r.a.createElement(T.a,{title:"logout",placement:"top"},r.a.createElement(U.a,{onClick:function(){e.logOut()}},r.a.createElement(ze.a,{color:"primary"}))),r.a.createElement(Ke,null))):r.a.createElement(_e.a,{className:a.paper},r.a.createElement(ce.a,{variant:"body2",align:"center"},"No profile found ,please login"),r.a.createElement("div",{className:a.button},r.a.createElement(R.a,{variant:"contained",color:"primary",component:o.b,to:"/login"},"login"),r.a.createElement(R.a,{variant:"contained",color:"secondary",component:o.b,to:"/signup"},"signup"))))}))),Qe=t(261),Xe=Y()({card:{display:"flex",marginBottom:20},cardContent:{width:"100%",flexDirection:"column",padding:25},cover:{minWidth:200,objectFit:"cover"},handle:{width:60,height:18,marginBottom:7},date:{height:14,width:100,backgroundColor:"rgba(0,0,0, 0.3)",marginBottom:10},fullLine:{height:15,width:"90%",backgroundColor:"rgba(0,0,0, 0.6)",marginBottom:10},halfLine:{height:15,width:"50%",backgroundColor:"rgba(0,0,0, 0.6)",marginBottom:10}})((function(e){var a=e.classes,t=Array.from({length:5}).map((function(e,t){return r.a.createElement(he.a,{className:a.card,key:t},r.a.createElement(Qe.a,{className:a.cover,image:Ve.a}),r.a.createElement(ve.a,{className:a.cardContent},r.a.createElement("div",{className:a.handle}),r.a.createElement("div",{className:a.date}),r.a.createElement("div",{className:a.fullLine}),r.a.createElement("div",{className:a.fullLine}),r.a.createElement("div",{className:a.halfLine})))}));return r.a.createElement(n.Fragment,null,t)}));var Ze=Object(d.b)((function(e){return{screams:e.data.screams}}),{getScreams:function(){return function(e){e({type:"LOADING_DATA"}),E.a.get("/screams").then((function(a){e({type:"SET_SCREAMS",payload:a.data})})).catch((function(a){e({type:"SET_SCREAMS",payload:[]})}))}}})((function(e){var a=Object(n.useState)([]),t=Object(W.a)(a,2),l=t[0],c=t[1];return Object(n.useEffect)((function(){e.getScreams(),c(e.screams)}),[e.screams.length]),r.a.createElement("div",null,r.a.createElement(be.a,{container:!0,spacing:1},r.a.createElement(be.a,{item:!0,sm:8,xs:12},l.length>0?l.map((function(e){return r.a.createElement(De,{scream:e,key:e.screamId})})):r.a.createElement(Xe,null)),r.a.createElement(be.a,{item:!0,sm:4,xs:12},r.a.createElement($e,null))))}));var ea=Object(d.b)((function(e){return{user:e.user,UI:e.UI}}),{loginUser:function(e,a){return function(t){t({type:"LOADING_UI"}),E.a.post("/login",e).then((function(e){console.log(e.data),b(e.data.token),t(f()),t({type:"CLEAR_ERRORS"}),a.push("/")})).catch((function(e){var a;t({payload:null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data,type:"SET_ERRORS"})}))}}})(Object(ge.a)({form:{textAlign:"center"},pageTitle:{margin:"10px auto"},textField:{margin:"10px auto"},button:{marginTop:"20px",position:"relative"},customError:{marginTop:"10px",color:"red"},progress:{position:"absolute"}})((function(e){var a=e.classes,t=e.UI.loading,l=Object(n.useState)({email:"",password:"",errors:null}),c=Object(W.a)(l,2),i=c[0],m=c[1],s=i.email,u=i.password,d=i.errors,p=function(e){m(Object(j.a)(Object(j.a)({},i),{},Object(B.a)({},e.target.name,e.target.value)))};return Object(n.useEffect)((function(){m(Object(j.a)(Object(j.a)({},i),{},{errors:e.UI.errors}))}),[e.UI.errors]),r.a.createElement("div",null,r.a.createElement(be.a,{className:a.form,container:!0},r.a.createElement(be.a,{item:!0,sm:!0}),r.a.createElement(be.a,{item:!0,sm:!0},r.a.createElement(ce.a,{variant:"h2",className:a.pageTitle},"Login"),r.a.createElement("form",{noValidate:!0,onSubmit:function(a){a.preventDefault();var t={email:s,password:u};e.loginUser(t,e.history)}},r.a.createElement(z.a,{id:"email",type:"email",name:"email",label:"Email",className:a.textField,value:s,onChange:p,helperText:null===d||void 0===d?void 0:d.email,error:!!(null===d||void 0===d?void 0:d.email),fullWidth:!0}),r.a.createElement(z.a,{id:"password",type:"password",name:"password",label:"Password",className:a.textField,value:u,onChange:p,fullWidth:!0,helperText:null===d||void 0===d?void 0:d.password,error:!!(null===d||void 0===d?void 0:d.password)}),(null===d||void 0===d?void 0:d.error)&&r.a.createElement(ce.a,{vriant:"body2",className:a.customError},null===d||void 0===d?void 0:d.error),r.a.createElement(R.a,{variant:"contained",color:"primary",type:"submit",className:a.button,disabled:t},"Login",t&&r.a.createElement(J.a,{className:a.progress})),r.a.createElement("br",null),r.a.createElement("small",null,"dont have an account ",r.a.createElement(o.b,{to:"/signup"},"Signup")))),r.a.createElement(be.a,{item:!0,sm:!0})))})));var aa=Object(d.b)((function(e){return{user:e.user,UI:e.UI}}),{signupUser:function(e,a){return function(t){t({type:"LOADING_UI"}),E.a.post("/signup",e).then((function(e){console.log(e.data),b(e.data.token),t(f()),t({type:"CLEAR_ERRORS"}),a.push("/")})).catch((function(e){t({payload:null===e||void 0===e?void 0:e.response.data,type:"SET_ERRORS"})}))}}})(Object(ge.a)({form:{textAlign:"center"},pageTitle:{margin:"10px auto"},textField:{margin:"10px auto"},button:{marginTop:"20px",position:"relative"},customError:{marginTop:"10px",color:"red"},progress:{position:"absolute"}})((function(e){var a=e.classes,t=e.UI.loading,l=Object(n.useState)({email:"",password:"",confirmPassword:"",handle:"",errors:null}),c=Object(W.a)(l,2),i=c[0],m=c[1],s=i.email,u=i.password,d=i.errors,p=i.handle,E=i.confirmPassword,f=function(e){m(Object(j.a)(Object(j.a)({},i),{},Object(B.a)({},e.target.name,e.target.value)))};return Object(n.useEffect)((function(){m(Object(j.a)(Object(j.a)({},i),{},{errors:e.UI.errors}))}),[e.UI.errors]),r.a.createElement("div",null,r.a.createElement(be.a,{className:a.form,container:!0},r.a.createElement(be.a,{item:!0,sm:!0}),r.a.createElement(be.a,{item:!0,sm:!0},r.a.createElement(ce.a,{variant:"h2",className:a.pageTitle},"Signup"),r.a.createElement("form",{noValidate:!0,onSubmit:function(a){a.preventDefault(),m(Object(j.a)(Object(j.a)({},i),{},{loading:!0}));var t={email:s,password:u,confirmPassword:E,handle:p};e.signupUser(t,e.history)}},r.a.createElement(z.a,{id:"email",type:"email",name:"email",label:"Email",className:a.textField,value:s,onChange:f,helperText:null===d||void 0===d?void 0:d.email,error:!!(null===d||void 0===d?void 0:d.email),fullWidth:!0}),r.a.createElement(z.a,{id:"password",type:"password",name:"password",label:"Password",className:a.textField,value:u,onChange:f,fullWidth:!0,helperText:null===d||void 0===d?void 0:d.password,error:!!(null===d||void 0===d?void 0:d.password)}),r.a.createElement(z.a,{id:"confirmPassword",type:"password",name:"confirmPassword",label:"confirmPassword",className:a.textField,value:E,onChange:f,fullWidth:!0,helperText:null===d||void 0===d?void 0:d.confirmPassword,error:!!(null===d||void 0===d?void 0:d.confirmPassword)}),r.a.createElement(z.a,{id:"handle",type:"text",name:"handle",label:"handle",className:a.textField,value:p,onChange:f,fullWidth:!0,helperText:null===d||void 0===d?void 0:d.handle,error:!!(null===d||void 0===d?void 0:d.handle)}),(null===d||void 0===d?void 0:d.error)&&r.a.createElement(ce.a,{vriant:"body2",className:a.customError},null===d||void 0===d?void 0:d.error),r.a.createElement(R.a,{variant:"contained",color:"primary",type:"submit",className:a.button,disabled:t},"Signup",t&&r.a.createElement(J.a,{className:a.progress})),r.a.createElement("br",null),r.a.createElement("small",null,"already have an account ",r.a.createElement(o.b,{to:"/login"},"Login")))),r.a.createElement(be.a,{item:!0,sm:!0})))}))),ta=t(144);var na=Object(d.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var a=e.component,t=e.authenticated,n=Object(ta.a)(e,["component","authenticated"]);return r.a.createElement(i.b,Object.assign({},n,{render:function(e){return!0===t?r.a.createElement(i.a,{to:"/"}):r.a.createElement(a,e)}}))})),ra=t(262),la=t(141),ca=t.n(la);var oa=Y()({paper:{padding:20},profile:{"& .image-wrapper":{textAlign:"center",position:"relative","& button":{position:"absolute",top:"80%",left:"70%"}}},profileImage:{width:200,height:200,objectFit:"cover",maxWidth:"100%",borderRadius:"50%"},profileDetails:{textAlign:"center","& span, svg":{verticalAlign:"middle"},"& a":{color:"#00bcd4"}},"& hr":{border:"none",margin:"0 0 10px 0"},"& svg.button":{"&:hover":{cursor:"pointer"}}})((function(e){var a=e.classes,t=e.profile,l=t.handle,c=t.createdAt,i=t.imageUrl,m=t.bio,s=t.website,u=t.location;return r.a.createElement("div",null,r.a.createElement(_e.a,{className:a.paper},r.a.createElement("div",{className:a.profile},r.a.createElement("div",{className:"image-wrapper"},r.a.createElement("img",{src:i,alt:"profile",className:a.profileImage})),r.a.createElement("div",{className:a.profileDetails},r.a.createElement(ra.a,{component:o.b,to:"/users/".concat(l),color:"primary",variant:"h5"},"@",l),m&&r.a.createElement(ce.a,{variant:"body2"},m),u&&r.a.createElement(n.Fragment,null,r.a.createElement(Ge.a,{color:"primary"})," ",r.a.createElement("span",null,u)),r.a.createElement("br",null),s&&r.a.createElement(n.Fragment,null,r.a.createElement(Pe.a,{color:"primary"}),r.a.createElement("a",{href:s,target:"_blank",rel:"noopener noreferrer"}," ",s)),r.a.createElement("br",null),r.a.createElement(ca.a,{color:"primary"})," ",r.a.createElement("span",null,"Joined ",ae()(c).format("MMM YYYY"))))))}));var ia=Object(d.b)((function(e){return{data:e.data}}),{getUserData:function(e){return function(a){a({type:"LOADING_DATA"}),E.a.get("/user/".concat(e)).then((function(e){a({type:"SET_SCREAMS",payload:e.data.screams})})).catch((function(){a({type:"SET_SCREAMS",payload:null})}))}}})((function(e){var a=Object(n.useState)({profile:null,screamIdParam:null}),t=Object(W.a)(a,2),l=t[0],c=t[1],o=l.profile,i=l.screamIdParam,m=e.match.params.handle,s=e.match.params.screamId;Object(n.useEffect)((function(){s&&c(Object(j.a)(Object(j.a)({},l),{},{screamIdParam:s})),e.getUserData(m),E.a.get("/user/".concat(m)).then((function(e){c(Object(j.a)(Object(j.a)({},l),{},{profile:e.data.user}))})).catch((function(e){return console.log(e)}))}),[]);var u=e.data,d=u.screams,p=u.loading;return r.a.createElement("div",null,r.a.createElement(be.a,{container:!0},r.a.createElement(be.a,{item:!0,sm:8,xs:12},p?r.a.createElement("p",null,"loading..."):null===d?r.a.createElement("p",null,"No screams from this user"):i?d.map((function(e){return e.screamId!==i?r.a.createElement(De,{key:e.screamId,scream:e}):r.a.createElement(De,{key:e.screamId,scream:e,openDialog:s})})):d.map((function(e){return r.a.createElement(De,{key:e.screamId,scream:e})}))),r.a.createElement(be.a,{item:!0,sm:4,xs:12},null===o?r.a.createElement(qe,null):r.a.createElement(oa,{profile:o}))))})),ma=Object(m.a)({palette:{primary:{light:"#33c9dc",main:"#00bcd4",dark:"#008394",contrastText:"#fff"},secondary:{light:"#ff6333",main:"#ff3d00",dark:"#b22a00",contrastText:"#fff"},form:{textAlign:"center"},pageTitle:{margin:"10px auto"},textField:{margin:"10px auto"},button:{marginTop:"20px",position:"relative"},customError:{marginTop:"10px",color:"red"},progress:{position:"absolute"}}});(E.a.defaults.baseURL="https://us-central1-socialapp-e0d9f.cloudfunctions.net/api",localStorage.token)&&(1e3*Object(u.a)(localStorage.token).exp<Date.now()?w.dispatch(g()):(w.dispatch({type:"SET_AUTHENTICATED"}),E.a.defaults.headers.common.Authorization=localStorage.token,w.dispatch(f())));var sa=function(){return r.a.createElement("div",null,r.a.createElement(s.a,{theme:ma},r.a.createElement(d.a,{store:w},r.a.createElement(o.a,null,r.a.createElement(fe,null),r.a.createElement("div",{className:"container"},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:Ze}),r.a.createElement(na,{exact:!0,path:"/login",component:ea}),r.a.createElement(na,{exact:!0,path:"/signup",component:aa}),r.a.createElement(i.b,{exact:!0,path:"/users/:handle",component:ia}),r.a.createElement(i.b,{exact:!0,path:"/users/:handle/scream/:screamId",component:ia})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(sa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},88:function(e,a,t){e.exports=t.p+"static/media/blank-profile-picture-973460_640.6732bd42.png"}},[[163,1,2]]]);
//# sourceMappingURL=main.ab776449.chunk.js.map